<!DOCTYPE html>
<html>
<head>
<title>Leaflet Quick Start Guide Example</title>
<meta charset="utf-8" />

<meta name="viewport" content="width=device-width, initial-scale=1.0">

<link rel="stylesheet" href="http://cdn.leafletjs.com/leaflet-0.7.3/leaflet.css" />
<style>
body {
    padding: 0;
    margin: 0;
}

html, body, #map {
    height: 100%;
}
</style>
</head>
<body>
  <div id="map"></div>
<script src="http://cdn.leafletjs.com/leaflet-0.7.3/leaflet.js"></script>
<script src='https://api.tiles.mapbox.com/mapbox.js/plugins/leaflet-omnivore/v0.2.0/leaflet-omnivore.min.js'></script>
<script>
function createPopUp(properties) {
    var html = '<table>';
    for ( var key in properties) {
        if (properties.hasOwnProperty(key)) {
            var value = properties[key];
            if (value) {
                if (typeof value === 'object') {
                    html += '<tr><td>' + key + '</td><td>' + createPopUp(value) + '</td></tr>';
                } else {
                    html += '<tr><td>' + key + '</td><td>' + value + '</td></tr>';
                }
            }
        }
    }
    html += '</table>';
    return html;
}

var seed = 9;
function randomColor() {
    seed = (seed * 9301 + 49297) % 233280;
    return '#' + Math.floor((seed / 233280.0) * 16777215).toString(16);
}

var map = L.map('map').fitBounds([[25, -130], [50, -70]]);;
new L.TileLayer('http://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
    attribution : 'Map data Â© <a href="http://openstreetmap.org">OpenStreetMap</a> contributors'
}).addTo(map);

omnivore.topojson('http://cesiumjs.org/Cesium/Apps/SampleData/ne_10m_us_states.topojson').on('ready', function(layer) {
    this.eachLayer(function(polygon) {
        polygon.setStyle({
            weight : 1,
            color : '#000000',
            opactity : 1,
            fillOpacity : 1,
            fillColor : randomColor()
        });
        var feature = polygon.feature;
        if (feature.properties && feature.properties) {
            polygon.bindPopup(createPopUp(feature.properties));
        }
    });
}).addTo(map);
</script>
</body>
</html>